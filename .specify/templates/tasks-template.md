---

description: "特性实现的任务清单模板"
---

# 任务：[FEATURE NAME]

**输入**：来自 `/specs/[###-feature-name]/` 的设计文档  
**前置**：plan.md（必需）、spec.md（用户故事必需）、research.md、data-model.md、contracts/

**测试**：下例包含测试任务。测试为可选——仅当特性规范明确要求时包含。

**组织**：任务按“用户故事”分组，以便每个故事可独立实现与测试。

## 格式：`[ID] [P?] [Story] 描述`

- **[P]**：可并行（不同文件、无依赖）
- **[Story]**：该任务所属的用户故事（如 US1、US2、US3）
- 描述中应包含精确文件路径

## 路径约定

- **单项目**：仓库根下 `src/`、`tests/`
- **Web 应用**：`backend/src/`、`frontend/src/`
- **移动端**：`api/src/`、`ios/src/` 或 `android/src/`
- 下方路径默认单项目结构——请按 plan.md 调整

<!-- 
  ============================================================================
  重要：以下任务仅为示例。
  /speckit.tasks 必须用真实任务替换它们，基于：
  - spec.md 中的用户故事与优先级
  - plan.md 中的特性需求
  - data-model.md 的实体
  - contracts/ 的端点
  任务必须按用户故事组织，以便独立实现/测试/MVP 交付。
  不要在生成的 tasks.md 中保留示例任务。
  ============================================================================
-->

## 阶段 1：Setup（共享基础设施）

**目的**：项目初始化与基础结构

- [ ] T001 按实施计划创建项目结构
- [ ] T002 初始化 [language] 项目并安装 [framework] 依赖
- [ ] T003 [P] 配置 Lint 与格式化工具

---

## 阶段 2：Foundational（阻塞前置）

**目的**：所有用户故事开始前必须完成的核心基础设施

⚠️ 关键：未完成前不得进入任一用户故事

示例（按项目实际调整）：

- [ ] T004 初始化数据库架构与迁移框架
- [ ] T005 [P] 搭建认证/授权框架
- [ ] T006 [P] 配置 API 路由与中间件结构
- [ ] T007 创建所有故事依赖的基础模型/实体
- [ ] T008 配置错误处理与日志基础设施
- [ ] T009 配置环境变量与配置管理

检查点：基础可用——可开始并行实现用户故事

---

## 阶段 3：用户故事 1 - [标题]（优先级：P1）🎯 MVP

**目标**：[此故事交付内容]

**独立测试**：[如何单独验证]

### 用户故事 1 的测试（可选，若有请求）⚠️

> 先编写测试并确保在实现前失败

- [ ] T010 [P] [US1] 合约测试 tests/contract/test_[name].py
- [ ] T011 [P] [US1] 集成测试 tests/integration/test_[name].py

### 用户故事 1 的实现

- [ ] T012 [P] [US1] 创建模型 src/models/[entity1].py
- [ ] T013 [P] [US1] 创建模型 src/models/[entity2].py
- [ ] T014 [US1] 实现服务 src/services/[service].py（依赖 T012、T013）
- [ ] T015 [US1] 实现端点/功能 src/[location]/[file].py
- [ ] T016 [US1] 增加校验与错误处理
- [ ] T017 [US1] 为本故事操作添加日志

检查点：用户故事 1 可独立完整运行并可测试

---

## 阶段 4：用户故事 2 - [标题]（优先级：P2）

**目标**：[此故事交付内容]

**独立测试**：[如何单独验证]

### 用户故事 2 的测试（可选）⚠️

- [ ] T018 [P] [US2] 合约测试 tests/contract/test_[name].py
- [ ] T019 [P] [US2] 集成测试 tests/integration/test_[name].py

### 用户故事 2 的实现

- [ ] T020 [P] [US2] 创建模型 src/models/[entity].py
- [ ] T021 [US2] 实现服务 src/services/[service].py
- [ ] T022 [US2] 实现端点/功能 src/[location]/[file].py
- [ ] T023 [US2] 与用户故事 1 组件集成（如需）

检查点：用户故事 1 与 2 均可独立运行

---

## 阶段 5：用户故事 3 - [标题]（优先级：P3）

**目标**：[此故事交付内容]

**独立测试**：[如何单独验证]

### 用户故事 3 的测试（可选）⚠️

- [ ] T024 [P] [US3] 合约测试 tests/contract/test_[name].py
- [ ] T025 [P] [US3] 集成测试 tests/integration/test_[name].py

### 用户故事 3 的实现

- [ ] T026 [P] [US3] 创建模型 src/models/[entity].py
- [ ] T027 [US3] 实现服务 src/services/[service].py
- [ ] T028 [US3] 实现端点/功能 src/[location]/[file].py

检查点：所有用户故事均可独立运行

---

[按需添加更多故事阶段，复用上述模式]

---

## 阶段 N：Polish 与横切关注点

**目的**：影响多个用户故事的改进

- [ ] TXXX [P] 更新文档 docs/
- [ ] TXXX 代码清理与重构
- [ ] TXXX 全局性能优化
- [ ] TXXX [P] 追加单元测试 tests/unit/（若有请求）
- [ ] TXXX 安全加固
- [ ] TXXX 运行 quickstart.md 校验

---

## 依赖与执行顺序

### 阶段依赖

- Setup（阶段 1）：无依赖，可立即开始
- Foundational（阶段 2）：依赖 Setup，阻塞全部用户故事
- 用户故事（阶段 3+）：依赖 Foundational 完成
  - 有人力时可并行推进；或按优先级顺序串行（P1 → P2 → P3）
- Polish（最终阶段）：依赖所需故事完成

### 用户故事依赖

- 用户故事 1（P1）：Foundational 完成后开始；不依赖其他故事
- 用户故事 2（P2）：Foundational 完成后开始；可与 US1 集成但需可独立测试
- 用户故事 3（P3）：Foundational 完成后开始；可与 US1/US2 集成但需可独立测试

### 每个用户故事内的顺序

- 若包含测试，先写测试并确保实现前失败
- 模型 → 服务 → 端点 → 集成
- 当前故事完成后再进入下一个

### 并行机会

- 所有标记 [P] 的 Setup/Foundational 任务可并行
- Foundational 完成后，用户故事可并行（视团队能力）
- 故事内标记 [P] 的测试与模型可并行
- 不同用户故事可由不同成员并行推进

---

## 实施策略

### 先做 MVP（仅用户故事 1）

1) 完成阶段 1：Setup  
2) 完成阶段 2：Foundational（关键）  
3) 完成阶段 3：用户故事 1  
4) 停止并验证：独立测试故事 1  
5) 若就绪则部署/演示

### 增量交付

1) 完成 Setup + Foundational → 基础就绪  
2) 加入用户故事 1 → 独立测试 → 部署/演示（MVP）  
3) 加入用户故事 2 → 独立测试 → 部署/演示  
4) 加入用户故事 3 → 独立测试 → 部署/演示  
5) 确保新增不破坏既有功能

### 并行团队策略

多人协作：

1) 团队共同完成 Setup + Foundational  
2) 基础完成后：A 负责 US1，B 负责 US2，C 负责 US3  
3) 各故事独立完成并集成

---

## 备注

- [P] 任务：不同文件、无依赖  
- [Story] 标签：用于可追溯性映射到用户故事  
- 每个用户故事应可独立完成与测试  
- 实现前先确保测试失败  
- 每个任务/逻辑组后提交  
- 可在任一检查点暂停并独立验证  
- 避免：模糊任务、同文件冲突、破坏故事独立性的跨故事依赖
