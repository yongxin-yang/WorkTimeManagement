<!--
同步影响报告
- 版本变更：2.0.0 → 2.1.0
- 修改的原则列表：
  - Windows 桌面端（PySide6） → Windows 桌面端（PySide6）与 Android 支持
- 新增章节：无
- 删除章节：无
- 需要更新的模板：
  - .specify/templates/plan-template.md 宪章检查 ✅ 已更新
  - .specify/templates/spec-template.md ✅ 无需改动
  - .specify/templates/tasks-template.md ✅ 无需改动
- 保留占位符：无
-->
# WorkTime Manager 宪章

## 核心原则

### 文档语言
所有文档均用中文书写
代码注释可使用英文

### Windows 桌面端（PySide6）与 Android 支持
Windows 端 MUST 以 PySide6 构建窗口与界面；Android 端 MUST 提供等价能力（记录、编辑、统计），技术栈由本项目自定并在计划/规范中细化；两端数据模型一致，差异仅限 UI/交互层。

### 核心数据优先与本地持久化
时间记录与项目数据 MUST 以统一模型存储于本地（如 SQLite/文件），端侧可独立运行；同步/集成后续以合约扩展，不影响本地能力。

### 统计即产品价值
系统 MUST 提供按项目、按天、按月的可复核统计；统计来源于同一事件明细，聚合口径一致且可重算。

### 可集成的边界与合约
为未来对接工作服务系统，MUST 预留清晰边界：导入/导出接口与数据契约（版本化），任何外部集成不改变核心模型与离线能力。

### 简单至上与最小依赖
遵循最小可行实现与最少依赖；模块职责清晰，避免过度抽象；命令式 I/O、直接读写，后期再引入错误处理与增强。

## 附加约束与技术栈

- 目标平台：Windows 桌面（Powershell 友好）、Android（移动端）
- 语言/版本：Python（建议 3.11+，Windows）；Kotlin（建议 1.9+，Android）
- GUI/UI：PySide6（Qt for Python，Windows）；Jetpack Compose（Android）
- 数据：统一数据模型；本地优先；SQLite（Room on Android）或文件（JSON/CSV）
- 同步/集成：通过导入/导出与版本化契约对接；核心不依赖网络
- 性能：统计与查询在 1 万记录规模下交互无明显卡顿（两端同口径）
- 架构：共享数据契约与聚合口径；Windows 为 PySide6 UI + 核心库；Android 为 Compose UI + 本地数据层（Room+Coroutines/Hilt 可选）

## 开发流程与质量门

- 阶段：结构搭建 → 核心函数实现 → 单文件/模块级测试 → 结构/功能优化 → 全量测试
- 质量门（设计完成后与交付前各一次）：
  - 多平台一致性：核心模型与用例在两端可复用或等价实现
  - 统计可验证：明细→聚合的可重算性与对账用例
  - 合约准备：导入/导出格式、版本字段、向后兼容策略
  - 简单性：避免不必要依赖与抽象，职责单一

## 治理

- 宪章优先：与其他文档冲突时以本宪章为准
- 修订流程：提交修订说明与影响评估；按语义化版本更新；更新依赖模板中的门禁/约束
- 版本策略：
  - MAJOR：删除/重定义原则或治理流程，或破坏性约束变更
  - MINOR：新增或大幅扩展原则/章节
  - PATCH：表述澄清，无语义变化
- 合规：评审需对照“质量门”；发布前完成一次全量门禁复核

**版本**：2.1.0 | **采纳日期**：2025-11-03 | **最近修订**：2025-11-03
